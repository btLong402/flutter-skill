pattern_name,category,problem_tags,description,key_widgets,code_snippet,anti_pattern
Infinite Scroll List,UI/UX,"lazy load, pagination, load more, cuộn vô tận, danh sách dài","Dùng ScrollController để phát hiện khi người dùng cuộn đến cuối danh sách và kích hoạt tải thêm dữ liệu.","ListView.builder, ScrollController, CircularProgressIndicator","final controller = ScrollController(); @override void initState() { super.initState(); controller.addListener(() { if (controller.position.pixels >= controller.position.maxScrollExtent - 200) { ref.read(provider.notifier).loadMore(); } }); }","Tránh sử dụng `SingleChildScrollView` bao ngoài `ListView`. Không dùng `shrinkWrap: true` nếu không thực sự cần thiết vì gây giảm hiệu năng nghiêm trọng."
Optimistic UI Update,State Management,"fast response, feedback, like button, cập nhật tức thì","State update trước khi gọi API để tạo cảm giác phản hồi tức thì. Nếu API lỗi thì rollback lại state cũ.","Riverpod, Bloc","// Riverpod Example void toggleLike(String id) { final oldState = state; state = [...state, id ]; // Update immediately try { await repo.like(id); } catch (e) { state = oldState; // Rollback on error } }","Không thông báo lỗi cho người dùng khi rollback. Quên try-catch khi gọi API."
Debounced Search,Logic,"search, filter, tìm kiếm, hiệu năng, input delay","Chờ người dùng ngừng gõ một khoảng thời gian (VD: 500ms) trước khi gọi API tìm kiếm để giảm tải server.","Timer, TextField, Riverpod","Timer? _debounce; void onSearchChanged(String query) { if (_debounce?.isActive ?? false) _debounce!.cancel(); _debounce = Timer(const Duration(milliseconds: 500), () { ref.read(searchProvider.notifier).search(query); }); }","Gọi API ngay trong hàm `onChanged` của TextField mỗi khi gõ một ký tự."
Responsive Layout (Mobile/Desktop),UI/UX,"responsive, adaptive, tablet, desktop, đa màn hình","Tự động chuyển đổi giữa BottomNavigationBar (Mobile) và NavigationRail (Desktop/Tablet) dựa trên chiều rộng màn hình.","LayoutBuilder, NavigationRail, BottomNavigationBar","return LayoutBuilder(builder: (context, constraints) { if (constraints.maxWidth > 600) { return Row(children: [NavigationRail(...), Expanded(child: body)]); } else { return Scaffold(body: body, bottomNavigationBar: BottomNavigationBar(...)); } });","Sử dụng `Platform.isAndroid` để quyết định layout thay vì kích thước màn hình (vì Android cũng có tablet/desktop mode)."
Secure Authentication Flow,Architecture,"auth, login, redirect, bảo mật, token check","Kiểm tra trạng thái đăng nhập khi khởi động app và điều hướng người dùng. Sử dụng Interceptor để tự động logout khi token hết hạn (401).","GoRouter, FlutterSecureStorage, Dio","// GoRouter redirect redirect: (context, state) { final isLoggedIn = authState.value != null; final isLoggingIn = state.matchedLocation == '/login'; if (!isLoggedIn && !isLoggingIn) return '/login'; if (isLoggedIn && isLoggingIn) return '/'; return null; }","Lưu Access Token vào `SharedPreferences` (không an toàn). Xử lý logic điều hướng ngay trong UI Widget."
Form Validation & Submission,UI/UX,"form, input, validate, error handling, nhập liệu","Sử dụng GlobalKey<FormState> để validate toàn bộ form trước khi gửi dữ liệu. Hiển thị lỗi ngay trên TextField.","Form, TextFormField, GlobalKey","if (_formKey.currentState!.validate()) { _formKey.currentState!.save(); await submitData(); } // Validator example: validator: (value) => (value == null || value.isEmpty) ? 'Required' : null","Thực hiện validate thủ công bằng `if-else` cho từng controller thay vì dùng hệ thống Form validator."
Offline-First Data Sync,Architecture,"offline, cache, database, sync, mất mạng","Ưu tiên hiển thị dữ liệu từ Local DB (Hive/Isar). Gọi API cập nhật DB nền. Nếu không có mạng, hiển thị data cũ và queue hành động gửi đi.","Hive, ConnectivityPlus, Dio","final localData = await localSource.getAll(); if (localData.isNotEmpty) emit(localData); try { final remoteData = await remoteSource.getAll(); await localSource.save(remoteData); emit(remoteData); } catch (_) { // Silent fail or show snackbar }","Chặn người dùng sử dụng app khi không có mạng (Loading spinner vô tận)."
Staggered Animation List,UI/UX,"animation, list effect, hiệu ứng danh sách","Áp dụng hiệu ứng xuất hiện lần lượt cho các phần tử trong danh sách để tạo cảm giác mượt mà.","flutter_staggered_animations, AnimationController","AnimationConfiguration.staggeredList( position: index, duration: const Duration(milliseconds: 375), child: SlideAnimation( verticalOffset: 50.0, child: FadeInAnimation(child: ListItem(...)), ), )","Dùng cùng một AnimationController cho tất cả item khiến chúng xuất hiện cùng lúc thay vì lần lượt."
Custom Painter Usage,Performance,"custom ui, drawing, chart, vẽ hình, tối ưu","Sử dụng CustomPainter cho các hình vẽ phức tạp thay vì ghép nhiều Container/Widget để tối ưu bộ nhớ và GPU.","CustomPaint, CustomPainter, RepaintBoundary","class MyPainter extends CustomPainter { @override void paint(Canvas canvas, Size size) { // Draw logic } @override bool shouldRepaint(old) => false; // Optimization } // Wrap with RepaintBoundary if complex RepaintBoundary(child: CustomPaint(painter: MyPainter()))","Luôn trả về `true` trong `shouldRepaint`. Quên dùng `RepaintBoundary` cho các painter phức tạp."
Theme Mode Switch,UI/UX,"dark mode, theme, giao diện tối sáng","Chuyển đổi giao diện Sáng/Tối động mà không cần restart app. Lưu preference vào local storage.","MaterialApp, ThemeMode, Riverpod","MaterialApp( themeMode: ref.watch(themeProvider), theme: ThemeData.light(), darkTheme: ThemeData.dark(), ); // Provider logic: state = state == ThemeMode.light ? ThemeMode.dark : ThemeMode.light;","Hardcode màu sắc (Colors.black) thay vì dùng `Theme.of(context).colorScheme.onSurface`."
Pop Scope (Back Button Handle),Navigation,"back button, exit app, chặn thoát, xác nhận thoát","Chặn nút Back của Android để hiện dialog xác nhận trước khi thoát màn hình (Thay thế WillPopScope cũ).","PopScope","PopScope( canPop: false, onPopInvoked: (didPop) async { if (didPop) return; final bool shouldPop = await showDialog(...) ?? false; if (shouldPop && context.mounted) Navigator.of(context).pop(); }, child: Scaffold(...))","Sử dụng `WillPopScope` (đã deprecated). Không kiểm tra `didPop` gây xung đột với GoRouter."
Sliver Sticky Header,UI/UX,"scroll, header, sticky, appbar, tiêu đề dính","Tạo hiệu ứng header dính trên cùng khi cuộn, sử dụng trong các trang Profile hoặc Dashboard.","CustomScrollView, SliverPersistentHeader, SliverAppBar","SliverPersistentHeader( pinned: true, delegate: _StickyHeaderDelegate( minHeight: 60, maxHeight: 200, child: HeaderContent(), ), )","Cố gắng dùng `Stack` và lắng nghe scroll offset để tự tính toán vị trí (giật lag và kém hiệu quả)."
Image Caching & Placeholder,Performance,"image, cache, loading, ảnh mạng","Hiển thị ảnh từ mạng với bộ nhớ đệm, placeholder khi đang tải và icon lỗi khi tải thất bại.","cached_network_image","CachedNetworkImage( imageUrl: url, placeholder: (context, url) => CircularProgressIndicator(), errorWidget: (context, url, error) => Icon(Icons.error), cacheManager: customCacheManager, )","Dùng `Image.network` cho danh sách dài (không cache, tốn băng thông, lag khi cuộn)."
Dart 3 Sealed Class State,Logic,"pattern matching, state management, switch","Kiểm tra tính toàn vẹn của trạng thái (Exhaustiveness checking) bằng Sealed Classes và Switch Expression.","sealed class, switch","sealed class UIState {} class Loading extends UIState {} class Data extends UIState { final String data; Data(this.data); } // Usage widget = switch (state) { Loading() => CircularProgressIndicator(), Data(data: var d) => Text(d), };","Dùng `if (state is Loading)` rời rạc, dễ bỏ sót trường hợp."
Overlay Portal (Tooltip/Menu),UI/UX,"overlay, dropdown, tooltip, menu, popup","Hiển thị widget nổi lên trên các widget khác (như Dropdown, Tooltip) mà không bị cắt bởi cha. Thay thế OverlayEntry.","OverlayPortal, OverlayPortalController","final controller = OverlayPortalController(); return OverlayPortal( controller: controller, overlayChildBuilder: (context) => Positioned(child: Menu()), child: Button(onPressed: controller.toggle), );","Dùng `Stack` để giả lập overlay (bị giới hạn bởi kích thước widget cha)."
Hidden Drawer (Zoom),UI/UX,"drawer, menu, animation, zoom effect","Tạo hiệu ứng menu trượt kiểu 3D/Zoom thay vì Drawer truyền thống.","Transform, AnimationController, Stack","Stack( children: [MenuWidget(), Transform(transform: Matrix4.identity()..scale(scale)..translate(xOffset), child: MainScreen())] )","Sử dụng thư viện quá nặng cho một hiệu ứng đơn giản có thể tự viết."
Biometric Auth,System,"face id, touch id, fingerprint, bảo mật vân tay","Xác thực người dùng bằng sinh trắc học trước khi truy cập dữ liệu nhạy cảm.","local_auth","final auth = LocalAuthentication(); final bool didAuthenticate = await auth.authenticate( localizedReason: 'Quét vân tay để đăng nhập', options: const AuthenticationOptions(biometricOnly: true), );","Không xử lý trường hợp thiết bị không có phần cứng bảo mật hoặc người dùng chưa cài đặt vân tay."
Hero Animation Transition,UI/UX,"animation, transition, image zoom, chuyển cảnh","Hiệu ứng chuyển đổi mượt mà của cùng một widget giữa hai màn hình khác nhau (thường dùng cho ảnh).","Hero","// Screen A Hero(tag: 'img_1', child: Image.network(url)) // Screen B Hero(tag: 'img_1', child: Image.network(url))","Sử dụng `tag` không trùng khớp giữa hai màn hình hoặc dùng tag trùng lặp trên cùng một màn hình."
Pull to Refresh,UI/UX,"refresh, reload, kéo để tải, làm mới","Kéo danh sách từ trên xuống để tải lại dữ liệu mới nhất.","RefreshIndicator","RefreshIndicator( onRefresh: () async { await ref.read(provider.notifier).refresh(); }, child: ListView(...), )","Đặt `RefreshIndicator` bên trong `ListView` thay vì bao bên ngoài."
Dismissible List Item,UI/UX,"swipe, delete, action, vuốt xóa","Vuốt sang trái hoặc phải để thực hiện hành động (xóa, lưu trữ) trên item danh sách.","Dismissible","Dismissible( key: ValueKey(item.id), onDismissed: (direction) => deleteItem(item.id), background: Container(color: Colors.red), child: ListTile(...), )","Không cung cấp `key` duy nhất hoặc không xóa item khỏi data list sau khi UI đã dismiss."
Shimmer Loading Effect,UI/UX,"loading, skeleton, chờ, hiệu ứng xương","Hiển thị khung xương (skeleton) với hiệu ứng ánh sáng chạy qua trong khi chờ dữ liệu tải.","shimmer, Container","Shimmer.fromColors( baseColor: Colors.grey[300]!, highlightColor: Colors.grey[100]!, child: Container(color: Colors.white), )","Dùng CircularProgressIndicator cho mọi nơi, gây cảm giác ứng dụng bị treo."
Keep Alive Page,Performance,"tab, navigation, caching, giữ trạng thái","Giữ trạng thái của widget (như vị trí cuộn) khi chuyển đổi giữa các Tab trong PageView.","AutomaticKeepAliveClientMixin","class _MyState extends State<MyWidget> with AutomaticKeepAliveClientMixin { @override bool get wantKeepAlive => true; @override Widget build(context) { super.build(context); return ListView(...); } }","Quên gọi `super.build(context)` trong hàm build."
Value Listenable Builder,Performance,"rebuild, optimization, state, tối ưu rebuild","Chỉ rebuild một widget con cụ thể khi giá trị thay đổi thay vì rebuild toàn bộ widget cha.","ValueListenableBuilder, ValueNotifier","final ValueNotifier<int> _counter = ValueNotifier(0); // In build ValueListenableBuilder<int>( valueListenable: _counter, builder: (ctx, value, _) => Text('$value'), )","Dùng `setState` cho các thay đổi nhỏ, cục bộ tần suất cao."
Draggable Scrollable Sheet,UI/UX,"bottom sheet, modal, scroll, kéo lên","Tạo BottomSheet có thể kéo giãn chiều cao tùy ý, thường dùng cho chi tiết bản đồ hoặc bộ lọc.","DraggableScrollableSheet","DraggableScrollableSheet( builder: (context, scrollController) { return ListView(controller: scrollController, ...); } )","Quên truyền `scrollController` vào ListView con, khiến sheet không cuộn được."
Sliver App Bar Floating,UI/UX,"appbar, scroll, hide, ẩn hiện menu","AppBar ẩn đi khi cuộn xuống và hiện lại ngay lập tức khi cuộn lên nhẹ.","SliverAppBar","SliverAppBar( floating: true, snap: true, pinned: false, ... )","Dùng `pinned: true` khi muốn hiệu ứng ẩn hiện linh hoạt."
Masonry Grid Layout,UI/UX,"grid, pinterest style, layout, lưới so le","Hiển thị lưới với chiều cao các item khác nhau (kiểu Pinterest).","flutter_staggered_grid_view","MasonryGridView.count( crossAxisCount: 2, mainAxisSpacing: 4, crossAxisSpacing: 4, itemBuilder: (context, index) => Card(...), )","Cố gắng dùng `GridView` chuẩn và cắt crop ảnh để bằng nhau."
Interactive Viewer (Zoom/Pan),UI/UX,"zoom, pan, image, map, phóng to","Cho phép người dùng phóng to, thu nhỏ, kéo thả một widget (thường là ảnh hoặc sơ đồ).","InteractiveViewer","InteractiveViewer( minScale: 0.5, maxScale: 4.0, child: Image.asset('map.png'), )","Tự viết logic GestureDetector để xử lý ma trận transform."
Toast & Snackbar Notification,UI/UX,"alert, notification, thông báo, popup","Hiển thị thông báo tạm thời ở cuối màn hình.","ScaffoldMessenger, SnackBar","ScaffoldMessenger.of(context).showSnackBar( SnackBar(content: Text('Thành công!'), behavior: SnackBarBehavior.floating), );","Dùng `showDialog` cho các thông báo đơn giản không cần tương tác."
Expansion Tile List,UI/UX,"accordion, collapse, expand, mở rộng","Danh sách có thể mở rộng/thu gọn để xem chi tiết.","ExpansionTile","ExpansionTile( title: Text('Chi tiết'), children: [ Text('Nội dung bên trong...') ], )","Quên lưu trạng thái mở/đóng nếu danh sách bị rebuild."
Reorderable List,UI/UX,"sort, drag drop, list, sắp xếp","Cho phép người dùng kéo thả để thay đổi vị trí các item trong danh sách.","ReorderableListView","ReorderableListView( onReorder: (oldIndex, newIndex) { // Update data list logic }, children: items.map((e) => ListTile(key: ValueKey(e), ...)).toList(), )","Không cập nhật lại danh sách dữ liệu gốc trong hàm `onReorder`."
Text Form Field Password,UI/UX,"input, password, visibility, mật khẩu","Input mật khẩu có nút con mắt để hiện/ẩn ký tự.","TextFormField, IconButton","bool _obscure = true; TextFormField( obscureText: _obscure, decoration: InputDecoration( suffixIcon: IconButton( onPressed: () => setState(() => _obscure = !_obscure), icon: Icon(_obscure ? Icons.visibility : Icons.visibility_off), ), ), )","Tạo 2 widget TextField khác nhau và tráo đổi chúng thay vì đổi thuộc tính `obscureText`."
Copy to Clipboard,System,"clipboard, copy, paste, sao chép","Sao chép văn bản vào bộ nhớ tạm của thiết bị.","Clipboard, ClipboardData","await Clipboard.setData(ClipboardData(text: 'Nội dung copy')); ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text('Đã copy!')));","Không thông báo cho người dùng biết hành động copy đã thành công."
Launch URL (Web/Call/SMS),System,"link, web, browser, phone, mở liên kết","Mở trình duyệt web, gọi điện hoặc nhắn tin từ app.","url_launcher","final Uri url = Uri.parse('https://flutter.dev'); if (await canLaunchUrl(url)) { await launchUrl(url, mode: LaunchMode.externalApplication); }","Không kiểm tra `canLaunchUrl` trước khi gọi, có thể gây crash."
Share Content,System,"share, social, chia sẻ","Chia sẻ văn bản hoặc file sang các ứng dụng khác (Facebook, Zalo...).","share_plus","Share.share('Check out this app!', subject: 'App Recommendation');","Hardcode danh sách ứng dụng chia sẻ thay vì dùng Share Sheet của hệ thống."
Device Info Access,System,"device, info, model, version, thông tin máy","Lấy thông tin thiết bị như model, hệ điều hành để log lỗi hoặc logic riêng.","device_info_plus","final plugin = DeviceInfoPlugin(); if (Platform.isAndroid) { final androidInfo = await plugin.androidInfo; print(androidInfo.model); }","Không kiểm tra `Platform` trước khi gọi hàm đặc thù của OS."
Connectivity Check,System,"network, wifi, status, kiểm tra mạng","Kiểm tra trạng thái kết nối mạng hiện tại (Wifi/4G/None).","connectivity_plus","final result = await Connectivity().checkConnectivity(); if (result == ConnectivityResult.none) { showNoInternetDialog(); }","Chỉ kiểm tra một lần lúc khởi động mà không lắng nghe stream thay đổi trạng thái mạng."
Permission Handling,System,"permission, camera, location, quyền truy cập","Xin quyền truy cập phần cứng và xử lý khi người dùng từ chối.","permission_handler","var status = await Permission.camera.request(); if (status.isGranted) { openCamera(); } else if (status.isPermanentlyDenied) { openAppSettings(); }","Không xử lý trường hợp `isPermanentlyDenied`, khiến người dùng bị kẹt."
Geolocator (Location),System,"gps, location, map, vị trí","Lấy tọa độ GPS hiện tại của người dùng.","geolocator","final position = await Geolocator.getCurrentPosition(desiredAccuracy: LocationAccuracy.high);","Quên kiểm tra xem Location Service có đang bật hay không trước khi lấy tọa độ."
Shared Preferences Helper,Data,"storage, local, config, lưu cấu hình","Lớp bao (Wrapper) để lưu trữ key-value đơn giản (token, theme, language).","shared_preferences","class Prefs { static late SharedPreferences _prefs; static Future init() async => _prefs = await SharedPreferences.getInstance(); static String? getToken() => _prefs.getString('token'); }","Dùng SharedPreferences để lưu dữ liệu lớn hoặc danh sách phức tạp (json)."
Debounced Button (Throttling),UI/UX,"button, click, spam, chống spam click","Ngăn người dùng bấm nút liên tục gây gọi API nhiều lần (Throttling).","GestureDetector","bool _isLoading = false; void _onPress() async { if (_isLoading) return; setState(() => _isLoading = true); await submit(); setState(() => _isLoading = false); }","Không vô hiệu hóa nút (disable) hoặc hiện loading khi đang xử lý."
Dio Interceptor (Logging/Auth),Architecture,"api, http, token, refresh token, log","Tự động đính kèm Token vào header và log request/response.","dio","dio.interceptors.add(InterceptorsWrapper( onRequest: (options, handler) { options.headers['Authorization'] = 'Bearer $token'; return handler.next(options); } ));","Viết logic thêm header lặp đi lặp lại ở mọi nơi gọi API."
Json Serializable (Freezed),Data,"model, json, parse, immutable, dữ liệu","Tự động sinh code for JSON parsing và copyWith, giúp model bất biến.","freezed, json_annotation","@freezed class User with _$User { const factory User({required String id, required String name}) = _User; factory User.fromJson(Map<String, dynamic> json) => _$UserFromJson(json); }","Viết tay `fromJson` và `toJson` dễ sai sót chính tả và kiểu dữ liệu."
Repository Pattern,Architecture,"architecture, data layer, clean code, cấu trúc","Tách biệt logic gọi dữ liệu (API/Local) khỏi UI và Business Logic.","Repository Class","class UserRepository { final DioClient _client; UserRepository(this._client); Future<User> getUser() async { final res = await _client.get('/user'); return User.fromJson(res.data); } }","Gọi trực tiếp `http.get` trong Widget hoặc Controller."
Dependency Injection (GetIt),Architecture,"di, locator, service, tiêm phụ thuộc","Quản lý các instance singleton (API, Auth, Repo) để truy cập mọi nơi.","get_it","final getIt = GetIt.instance; void setup() { getIt.registerLazySingleton(() => AuthRepository()); } // Usage: getIt<AuthRepository>().login();","Truyền dependencies qua constructor của quá nhiều tầng widget."
GoRouter Nested Navigation,Navigation,"navigation, bottom bar, nested, điều hướng lồng","Cấu hình BottomNavigationBar vẫn giữ nguyên khi chuyển trang con bên trong tab.","go_router, ShellRoute","ShellRoute( builder: (context, state, child) => Scaffold(body: child, bottomNavigationBar: MyNavBar()), routes: [ GoRoute(path: '/home', builder: ...), GoRoute(path: '/profile', builder: ...) ] )","Dùng `CupertinoTabScaffold` cho Android hoặc tự quản lý `IndexedStack` quá phức tạp."
Riverpod AsyncValue Handling,State Management,"riverpod, async, loading, error, state","Xử lý 3 trạng thái của dữ liệu bất đồng bộ (Loading, Data, Error) gọn gàng.","flutter_riverpod","ref.watch(userProvider).when( data: (user) => UserView(user), loading: () => const CircularProgressIndicator(), error: (err, stack) => Text('Error: $err'), );","Dùng biến `isLoading` và `errorMessage` riêng lẻ trong State class thủ công."
Bloc Event-State Pattern,State Management,"bloc, state, event, luồng dữ liệu","Mẫu thiết kế Bloc chuẩn: UI gửi Event -> Bloc xử lý -> Bloc emit State mới.","flutter_bloc","on<FetchData>((event, emit) async { emit(Loading()); try { final data = await repo.get(); emit(Loaded(data)); } catch (e) { emit(Error(e)); } });","Emit state mới ngay trong UI thay vì gửi Event."
Isolate Computation,Performance,"thread, background, heavy task, đa luồng","Chạy tác vụ nặng (parse JSON lớn, xử lý ảnh) trên luồng riêng để không chặn UI.","compute","final result = await compute(heavyCalculation, data); // heavyCalculation must be a static or top-level function","Thực hiện vòng lặp lớn hoặc decode JSON MBs ngay trên Main Thread."
Custom Font Loading,UI/UX,"font, typography, google fonts, phông chữ","Sử dụng Google Fonts hoặc custom font file.","google_fonts","Text('Hello', style: GoogleFonts.lato(textStyle: TextStyle(fontSize: 20)));","Import file ttf nhưng quên khai báo trong `pubspec.yaml`."
SVG Icon Rendering,UI/UX,"image, vector, icon, svg","Hiển thị ảnh vector SVG để sắc nét ở mọi độ phân giải.","flutter_svg","SvgPicture.asset('assets/icons/home.svg', color: Colors.blue, width: 24);","Dùng ảnh PNG cho các icon đơn sắc (bị vỡ khi scale)."
Lottie Animation,UI/UX,"animation, json, after effects, hoạt hình","Hiển thị animation phức tạp từ file JSON (xuất từ After Effects).","lottie","Lottie.asset('assets/anim/loading.json', repeat: true, reverse: true);","Dùng file GIF (dung lượng lớn, khó kiểm soát frame)."
SafeArea Usage,UI/UX,"notch, iphone x, padding, vùng an toàn","Tránh nội dung bị che bởi tai thỏ (notch) hoặc thanh điều hướng home ảo.","SafeArea","Scaffold( body: SafeArea( child: ContentWidget(), ), )","Hardcode `padding-top: 50` để tránh tai thỏ (sai trên các máy khác nhau)."
FittedBox Scaling,UI/UX,"text, scale, responsive, co giãn","Tự động thu nhỏ text hoặc widget để vừa khít container thay vì bị tràn (overflow).","FittedBox","Container( width: 100, child: FittedBox(fit: BoxFit.scaleDown, child: Text('Very Long Text')), )","Để Text bị lỗi sọc vàng đen (overflow) khi màn hình nhỏ."
Wrap Layout,UI/UX,"layout, chip, tag, xuống dòng","Sắp xếp các widget con (như tags) tự động xuống dòng khi hết chỗ.","Wrap","Wrap( spacing: 8.0, runSpacing: 4.0, children: tags.map((t) => Chip(label: Text(t))).toList(), )","Dùng `Row` và bị lỗi overflow khi danh sách tag quá dài."
AspectRatio Widget,UI/UX,"layout, ratio, video, tỷ lệ khung hình","Giữ tỷ lệ khung hình (16:9, 4:3) cho widget con bất kể kích thước cha.","AspectRatio","AspectRatio( aspectRatio: 16 / 9, child: VideoPlayer(), )","Tự tính chiều cao bằng `width * 9 / 16` (kém linh hoạt)."
Spacer & Expanded,UI/UX,"layout, flex, row, column, khoảng cách","Phân chia không gian trong Row/Column. Spacer tạo khoảng trống, Expanded chiếm phần còn lại.","Spacer, Expanded","Row(children: [Text('Left'), Spacer(), Text('Right')]); // Pushes text to edges","Dùng `MainAxisAlignment.spaceBetween` khi cần kiểm soát cụ thể khoảng cách giữa các phần tử."
LayoutBuilder (Conditional UI),UI/UX,"responsive, constraints, size check, điều kiện layout","Kiểm tra kích thước widget cha để render UI phù hợp (ẩn hiện cột).","LayoutBuilder","LayoutBuilder(builder: (context, constraints) { return constraints.maxWidth < 500 ? MobileView() : DesktopView(); });","Dùng `MediaQuery.of(context).size` (lấy kích thước màn hình thay vì kích thước widget cha)."
Orientation Builder,UI/UX,"rotate, landscape, portrait, xoay màn hình","Thay đổi layout khi xoay ngang/dọc thiết bị.","OrientationBuilder","OrientationBuilder( builder: (context, orientation) { return orientation == Orientation.portrait ? Column(...) : Row(...); } )","Không xử lý xoay màn hình, để UI bị vỡ khi ngang."
FutureBuilder (Simple Fetch),Logic,"async, future, api, load data, tải dữ liệu","Xây dựng UI dựa trên trạng thái của một Future (đơn giản, không cần Redux/Bloc).","FutureBuilder","FutureBuilder<Data>( future: getData(), builder: (context, snapshot) { if (snapshot.hasData) return Text(snapshot.data!.title); return CircularProgressIndicator(); } )","Gọi hàm tạo Future (ví dụ `getData()`) trực tiếp trong `builder` (khiến API gọi lại mỗi khi rebuild)."
StreamBuilder (Realtime),Logic,"async, stream, socket, realtime, thời gian thực","Cập nhật UI liên tục theo luồng dữ liệu (Firestore, WebSocket).","StreamBuilder","StreamBuilder<int>( stream: channel.stream, builder: (context, snapshot) => Text('Count: ${snapshot.data}'), )","Quên đóng stream (cancel subscription) khi widget bị hủy (nếu không dùng StreamBuilder)."
WillPopScope (Double Back to Exit),Navigation,"exit, back, thoát app, bấm 2 lần","Yêu cầu bấm Back 2 lần trong 2 giây để thoát app.","WillPopScope (Deprecated) -> PopScope","DateTime? currentBackPressTime; PopScope( canPop: false, onPopInvoked: (didPop) { final now = DateTime.now(); if (currentBackPressTime == null || now.difference(currentBackPressTime!) > Duration(seconds: 2)) { currentBackPressTime = now; toast('Press back again to exit'); return; } SystemNavigator.pop(); }, child: ... )","Không reset thời gian, khiến lần bấm sau bao lâu cũng thoát."
System Chrome (UI Overlay),UI/UX,"status bar, color, full screen, thanh trạng thái","Đổi màu thanh trạng thái (status bar) hoặc ẩn đi.","SystemChrome","SystemChrome.setSystemUIOverlayStyle(SystemUiOverlayStyle( statusBarColor: Colors.transparent, statusBarIconBrightness: Brightness.dark, ));","Đặt code này trong hàm `build` (gọi liên tục). Nên đặt ở `main` hoặc `initState`."
Wakelock (Keep Screen On),System,"screen, sleep, video, giữ màn hình sáng","Ngăn màn hình tự tắt khi đang xem video hoặc bản đồ.","wakelock_plus","WakelockPlus.enable(); // When dispose: WakelockPlus.disable();","Quên disable wakelock khi thoát màn hình, gây tốn pin."
QR Code Scanner,System,"camera, qr, barcode, quét mã","Quét mã QR hoặc Barcode.","mobile_scanner","MobileScanner( onDetect: (capture) { final List<Barcode> barcodes = capture.barcodes; // Handle code }, )","Không xử lý quyền Camera trước khi bật Scanner."
Date Picker Native,UI/UX,"date, calendar, input, chọn ngày","Mở hộp thoại chọn ngày chuẩn của hệ điều hành (Android/iOS).","showDatePicker","final date = await showDatePicker( context: context, initialDate: DateTime.now(), firstDate: DateTime(2000), lastDate: DateTime(2030), );","Dùng thư viện lịch quá nặng cho nhu cầu chọn ngày đơn giản."
Modal Bottom Sheet,UI/UX,"menu, options, dialog, menu dưới","Menu trượt từ dưới lên để chọn tác vụ.","showModalBottomSheet","showModalBottomSheet( context: context, builder: (context) => Wrap(children: [ListTile(title: Text('Edit')), ListTile(title: Text('Delete'))]), );","Để content quá dài mà không bọc trong `SingleChildScrollView` hoặc không set `isScrollControlled: true`."
Cached Network Image (Profile),UI/UX,"avatar, image, cache, circle, ảnh đại diện","Ảnh đại diện hình tròn có cache và fallback.","cached_network_image","CachedNetworkImage( imageUrl: url, imageBuilder: (context, provider) => CircleAvatar(backgroundImage: provider), placeholder: (context, url) => CircleAvatar(child: Icon(Icons.person)), )","Dùng `ClipRRect` bọc `Image.network` (hiệu năng kém hơn `CircleAvatar` hoặc `imageBuilder`)."
Page View (Onboarding),UI/UX,"slider, tutorial, swipe, hướng dẫn","Màn hình hướng dẫn vuốt ngang với các chấm chỉ mục (dots indicator).","PageView","PageView( controller: _controller, children: [Page1(), Page2(), Page3()], ); // Use external package like smooth_page_indicator for dots","Không tối ưu `PageController` hoặc để widget con quá nặng."
Video Player (Chewie),Media,"video, player, media, xem phim","Trình phát video với giao diện điều khiển (play/pause, seek).","chewie, video_player","Chewie( controller: ChewieController( videoPlayerController: VideoPlayerController.network(url), autoPlay: true, looping: true, ), )","Quên `dispose` VideoPlayerController gây rò rỉ bộ nhớ."
WebView (In-App Browser),System,"web, html, browser, duyệt web","Hiển thị trang web bên trong ứng dụng.","webview_flutter","WebViewController()..loadRequest(Uri.parse('https://google.com')); // Attach to WebViewWidget","Cho phép Javascript tùy tiện (`JavaScriptMode.unrestricted`) mà không kiểm soát bảo mật."
Google Maps Integration,System,"map, gps, location, bản đồ","Hiển thị bản đồ Google Maps và đánh dấu (marker).","google_maps_flutter","GoogleMap( initialCameraPosition: CameraPosition(target: LatLng(10.7, 106.6), zoom: 14), markers: {Marker(markerId: MarkerId('1'), position: LatLng(10.7, 106.6))}, )","Rebuild GoogleMap liên tục mà không dùng `Set<Marker>` (gây nháy marker)."
UUID Generation,Logic,"id, unique, key, định danh","Tạo chuỗi ID duy nhất cho các item mới.","uuid","var uuid = Uuid(); String id = uuid.v4();","Dùng `Random().nextInt()` làm ID (có thể trùng lặp)."
Intl Date Formatting,Logic,"date, time, format, định dạng ngày","Định dạng ngày tháng theo ngôn ngữ máy (dd/MM/yyyy).","intl","String formatted = DateFormat('dd/MM/yyyy HH:mm').format(DateTime.now());","Tự viết hàm ghép chuỗi ngày tháng (dễ sai logic múi giờ)."
Number Formatting (Currency),Logic,"money, currency, format, tiền tệ","Định dạng số tiền có dấu phẩy ngăn cách (1,000,000 VND).","intl","final currency = NumberFormat.currency(locale: 'vi_VN', symbol: '₫'); print(currency.format(1000000));","Dùng `toString()` và tự replace string."
Path Provider (File Storage),Data,"file, path, directory, lưu file","Lấy đường dẫn thư mục chuẩn để lưu file tạm hoặc file document.","path_provider","final directory = await getApplicationDocumentsDirectory(); final file = File('${directory.path}/my_file.txt');","Hardcode đường dẫn `/sdcard/...` (lỗi trên Android mới và iOS)."
Hive Database Setup,Data,"nosql, db, local, storage, cơ sở dữ liệu","Thiết lập DB NoSQL Hive nhanh và nhẹ.","hive_flutter","await Hive.initFlutter(); var box = await Hive.openBox('settings'); box.put('darkMode', true);","Mở box nhiều lần mà không kiểm tra đã mở chưa (`Hive.isBoxOpen`)."
Logger Utility,Logic,"log, debug, print, nhật ký","In log đẹp, có màu và tag để dễ debug.","logger","var logger = Logger(); logger.d('Debug message'); logger.e('Error message');","Dùng `print` cho mọi thứ (khó lọc log và làm rác console production)."
Extension Methods (String),Logic,"extension, utility, string, tiện ích","Thêm hàm tiện ích trực tiếp vào lớp String (ví dụ validate email).","dart extension","extension StringExt on String { bool get isValidEmail => RegExp(r'^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$').hasMatch(this); }","Viết các hàm Utils static rời rạc khó gọi (`Utils.isValidEmail(str)`)."
GetIt Service Locator,Architecture,"di, singleton, service, quản lý dịch vụ","Đăng ký và lấy các service (API, Auth) từ một nơi duy nhất.","get_it","GetIt.I.registerSingleton<AuthService>(AuthService()); // Usage: GetIt.I<AuthService>().login();","Khởi tạo service ở khắp nơi (`new AuthService()`)."
Equatable (Value Equality),Logic,"compare, state, equality, so sánh","So sánh hai object dựa trên giá trị thay vì tham chiếu (dùng cho State Management).","equatable","class User extends Equatable { final int id; const User(this.id); @override List<Object> get props => [id]; }","So sánh thủ công `user1.id == user2.id` ở nhiều nơi."
Cascade Operator Usage,Logic,"dart, syntax, clean code, cú pháp","Thực hiện nhiều thao tác trên cùng 1 object mà không cần lặp lại tên biến.",".. operator","final list = [] ..add(1) ..add(2) ..sort();","Viết `list.add(1); list.add(2); list.sort();` dòng dài dòng."
Collection If/For,Logic,"dart, list, ui, syntax, danh sách điều kiện","Dùng if/for ngay trong mảng widget children.","collection if","Column(children: [ Text('Title'), if (isLoading) CircularProgressIndicator(), for (var item in items) Text(item), ])","Dùng toán tử 3 ngôi phức tạp hoặc hàm `buildList()` riêng lẻ không cần thiết."
Const Constructor Optimization,Performance,"const, memory, optimization, tối ưu bộ nhớ","Sử dụng const cho các widget không thay đổi để tránh rebuild không cần thiết.","const","const Text('Static Title'); const SizedBox(height: 10);","Quên từ khóa `const` ở những nơi có thể dùng, làm tăng lượng rác bộ nhớ (GC)."
Factory Constructor,Logic,"dart, class, constructor, factory","Constructor trả về instance có sẵn hoặc từ cache thay vì luôn tạo mới.","factory","class Logger { static final Logger _instance = Logger._internal(); factory Logger() => _instance; Logger._internal(); }","Không dùng Singleton cho các class nặng (Database, Network Client)."
Named Parameters,Logic,"dart, function, arguments, tham số","Sử dụng tham số có tên để code dễ đọc và tùy chọn.","{}","void connect({required String host, int port = 80}) { ... } // Usage: connect(host: 'localhost');","Dùng quá nhiều tham số vị trí (`connect('localhost', 80, true, 5000)`) gây khó hiểu."
Isolate Spawn (Worker),Performance,"isolate, thread, parallel, đa luồng","Tạo luồng xử lý song song thủ công cho tác vụ cực nặng.","Isolate","void worker(SendPort port) { port.send('Done'); } // Usage: await Isolate.spawn(worker, receivePort.sendPort);","Giao tiếp giữa các Isolate quá phức tạp mà không dùng `compute` cho tác vụ đơn giản."
Flutter Hooks (UseEffect),State Management,"hooks, functional, state, react style","Quản lý vòng đời widget (init, dispose) gọn gàng như React Hooks.","flutter_hooks","class MyWidget extends HookWidget { @override Widget build(context) { useEffect(() { print('Init'); return () => print('Dispose'); }, []); return Container(); } }","Dùng `StatefulWidget` với quá nhiều boilerplate code cho logic đơn giản."
Analytic Event Tracking,Data,"analytics, log, tracking, thống kê","Gửi sự kiện người dùng thao tác về hệ thống phân tích (Firebase Analytics).","firebase_analytics","await FirebaseAnalytics.instance.logEvent( name: 'select_content', parameters: {'content_id': '123', 'content_type': 'image'}, );","Gửi string cứng (hardcoded strings) thay vì dùng hằng số (constants) cho tên sự kiện."
Crashlytics Error Reporting,Data,"crash, error, bug, báo lỗi","Tự động bắt lỗi crash và gửi về Firebase Crashlytics.","firebase_crashlytics","FlutterError.onError = FirebaseCrashlytics.instance.recordFlutterFatalError; // Catch non-fatal try { ... } catch (e, s) { FirebaseCrashlytics.instance.recordError(e, s); }","Chỉ in lỗi ra console và bỏ qua, không biết user gặp lỗi gì."
Environment Config (Flavors),Architecture,"config, flavor, dev, prod, môi trường","Cấu hình biến môi trường riêng cho Dev, Staging, Production.","flutter_dotenv / Entry Points","const apiUrl = String.fromEnvironment('API_URL', defaultValue: 'https://dev.api.com');","Sửa code thủ công mỗi khi build bản Dev hoặc Prod."
Asset Image Loading,UI/UX,"image, asset, resource, ảnh nội bộ","Load ảnh từ thư mục assets tối ưu.","Image.asset","Image.asset('assets/images/logo.png', width: 100, fit: BoxFit.contain);","Quên khai báo đường dẫn trong `pubspec.yaml`."
Gradient Background,UI/UX,"color, ui, gradient, màu nền","Tạo nền chuyển màu đẹp mắt.","BoxDecoration, LinearGradient","Container( decoration: BoxDecoration( gradient: LinearGradient( colors: [Colors.blue, Colors.purple], begin: Alignment.topLeft, end: Alignment.bottomRight, ) ) )","Dùng ảnh nền gradient nặng nề thay vì vẽ bằng code."
ClipRRect (Rounded Image),UI/UX,"image, border radius, bo góc, ảnh tròn","Bo tròn các góc của ảnh hoặc widget con.","ClipRRect","ClipRRect( borderRadius: BorderRadius.circular(8.0), child: Image.network(url), )","Dùng `Container` có `decoration` nhưng ảnh con vẫn bị vuông (không clip)."
Global Error Handler,Architecture,"error, exception, zone, xử lý lỗi toàn cục","Bắt tất cả các lỗi chưa được xử lý trong ứng dụng (Red screen guard).","runZonedGuarded","runZonedGuarded(() { runApp(MyApp()); }, (error, stack) { // Report error logic });","Để màn hình đỏ (Red Screen of Death) hiện ra trước mặt người dùng cuối."
Theme Extension (Custom Colors),UI/UX,"theme, color, design system, màu tùy chỉnh","Thêm các màu sắc custom vào ThemeData chuẩn của Flutter.","ThemeExtension","@override ThemeExtension<MyColors> copyWith(...) { ... } // Usage: Theme.of(context).extension<MyColors>()!.brandColor","Thêm biến static `MyColors.red` rời rạc, không đổi theo Theme Mode (Light/Dark) được."
Dynamic Grid Axis Count,UI/UX,"grid, responsive, layout, lưới động","Thay đổi số cột của GridView dựa trên chiều rộng màn hình.","SliverGridDelegateWithMaxCrossAxisExtent","GridView.builder( gridDelegate: SliverGridDelegateWithMaxCrossAxisExtent( maxCrossAxisExtent: 200, childAspectRatio: 3/2, ), ... )","Fix cứng `crossAxisCount: 2` khiến giao diện xấu trên tablet/iPad."
Scroll to Top Button,UI/UX,"scroll, button, navigation, cuộn lên đầu","Nút bấm để cuộn nhanh lên đầu trang danh sách.","ScrollController","FloatingActionButton( onPressed: () => controller.animateTo(0, duration: Duration(seconds: 1), curve: Curves.easeOut), child: Icon(Icons.arrow_upward), )","Dùng `jumpTo(0)` gây giật cục thay vì `animateTo`."
Keyboard Dismiss (Unfocus),UI/UX,"keyboard, input, focus, ẩn bàn phím","Tự động ẩn bàn phím khi bấm ra ngoài vùng nhập liệu.","GestureDetector, FocusScope","GestureDetector( onTap: () => FocusScope.of(context).unfocus(), child: Scaffold(...), )","Bắt người dùng phải bấm nút Done trên bàn phím mới ẩn được."
Retry Policy (API),Data,"api, retry, error, thử lại","Tự động gọi lại API nếu thất bại (mạng yếu).","retry / dio_smart_retry","final response = await retry( () => client.get('...'), retryIf: (e) => e is SocketException, maxAttempts: 3, );","Không có cơ chế retry, báo lỗi ngay lập tức khi mạng chập chờn."
Sliver Fill Remaining,UI/UX,"layout, scroll, center, căn giữa","Hiển thị nội dung căn giữa màn hình hoặc lấp đầy khoảng trống trong CustomScrollView.","SliverFillRemaining","SliverFillRemaining( hasScrollBody: false, child: Center(child: Text('Empty')), )","Dùng `SliverToBoxAdapter` và set height thủ công."
Auto Size Text,UI/UX,"text, scale, font size, chữ tự động","Tự động giảm kích thước chữ để vừa khung chứa.","auto_size_text","AutoSizeText('Very long title', maxLines: 1, minFontSize: 12);","Để text bị cắt (ellipsis) quá sớm khi vẫn còn chỗ trống."
Badges (Notification Count),UI/UX,"notification, badge, icon, thông báo","Hiển thị số lượng thông báo trên icon.","badges","Badge( badgeContent: Text('3', style: TextStyle(color: Colors.white)), child: Icon(Icons.shopping_cart), )","Tự dùng Stack và Positioned căn chỉnh thủ công (lệch trên các máy khác nhau)."
Skeltonizer (Loading UI),UI/UX,"loading, skeleton, ui, hiệu ứng chờ","Tự động biến UI thật thành khung loading skeleton mà không cần viết widget riêng.","skeletonizer","Skeletonizer( enabled: isLoading, child: RealUIWidget(data: mockData), )","Viết riêng một widget `LoadingItem` và phải bảo trì cả 2 bản UI."
Gap (Spacing),UI/UX,"layout, spacing, margin, khoảng cách","Thay thế SizedBox để tạo khoảng cách giữa các widget (dễ đọc hơn).","gap","Column(children: [Text('A'), Gap(10), Text('B')]);","Dùng `Padding` bao bọc từng widget chỉ để tạo khoảng trống."
Freezed Union Handling,Logic,"state, pattern matching, union","Xử lý các case của Union Type (Freezed) an toàn.","freezed, map/when","state.map( data: (d) => ShowData(d), error: (e) => ShowError(e), loading: (_) => ShowLoading(), );","Dùng `if (state is Data)` và ép kiểu thủ công."
Value Key (Widget Identity),Performance,"key, widget, update, định danh","Giúp Flutter phân biệt các widget trong danh sách khi thứ tự thay đổi.","ValueKey","ListView( children: items.map((item) => ListTile(key: ValueKey(item.id), ...)).toList() )","Không dùng Key hoặc dùng `index` làm Key (gây lỗi khi xóa/thêm item)."
Interactive Bottom Sheet,UI/UX,"bottom sheet, modal, drag, menu kéo","BottomSheet có thể tương tác (cuộn bên trong) và đóng khi kéo xuống.","showModalBottomSheet","showModalBottomSheet( isScrollControlled: true, builder: (_) => DraggableScrollableSheet(...) );","Bottom Sheet bị cố định chiều cao, không hiển thị hết nội dung."
Check Internet Connection Stream,System,"network, wifi, stream, theo dõi mạng","Lắng nghe thay đổi trạng thái mạng theo thời gian thực.","connectivity_plus","Connectivity().onConnectivityChanged.listen((ConnectivityResult result) { // Update UI status });","Chỉ kiểm tra một lần lúc gọi API."
Pill Button Padding,UI/UX,"button, pill, stadium, border radius, padding, text clipped, chữ bị cắt, nút bo tròn","Khi dùng button dạng pill (borderRadius = height/2), cần tăng padding horizontal để text không bị cắt ở hai đầu do vùng bo tròn chiếm không gian.","ElevatedButton, FilledButton, OutlinedButton","ElevatedButton( style: ElevatedButton.styleFrom( shape: StadiumBorder(), padding: EdgeInsets.symmetric(horizontal: 32, vertical: 16), // horizontal >= borderRadius + 8 ), child: Text('Nhận Chuyến'), )","Dùng default padding với pill button hoặc fixed height mà không tính toán padding. Ví dụ sai: SizedBox(height: 50, child: ElevatedButton(borderRadius: 25)) với default padding sẽ làm text bị cắt."